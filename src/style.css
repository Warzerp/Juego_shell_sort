/* =========================================
   1. FUENTES Y CONFIGURACIÓN GLOBAL
   ========================================= */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Share+Tech+Mono&family=VT323&display=swap');

body {
    margin: 0;
    font-family: 'Share Tech Mono', monospace;
    overflow: hidden;
    background-color: #050510;
    color: #ecf0f1;
    user-select: none;
    --neon-green: #00ff88;
    --neon-red: #ff0055;
    --neon-yellow: #ffbd2e;
}

/* =========================================
   2. EFECTOS VISUALES (CRT / SCANLINES)
   ========================================= */
.scanlines {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
    background-size: 100% 4px;
    z-index: 999; pointer-events: none;
}

.noise {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAGFBMVEUAAAA5OTkAAABMTExERERmZmYzMzMyMjJ423xnAAAACHRSTlMAM8z/M///zDN5A54AAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAwSURBVDjLY2AYBcMIMIwGwzCMAiCMBkMwDIZhGAzDMAyGYRgMwzAMhmEYDMMwEAYAAPp/A8McF626AAAAAElFTkSuQmCC');
    opacity: 0.05; z-index: 998; pointer-events: none; animation: noiseAnim 0.5s infinite;
}

/* =========================================
   3. MENÚ PRINCIPAL
   ========================================= */
#menu {
    width: 100vw; height: 100vh;
    background: radial-gradient(circle at center, #1a1a2e 0%, #000000 100%);
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
}

.contenedor-central {
    display: flex; flex-direction: row; align-items: center; justify-content: center;
    gap: 50px;
}

.area-personaje { position: relative; text-align: center; }

.holo-circle {
    position: absolute; bottom: 0px; left: 50%; transform: translateX(-50%);
    width: 150px; height: 15px;
    background: rgba(0, 255, 136, 0.3);
    border-radius: 50%;
    box-shadow: 0 0 30px #00ff88;
    filter: blur(8px);
    z-index: 0;
}

.galleta {
    width: 380px;
    filter: drop-shadow(0 0 10px var(--neon-green));
    animation: hologramFloat 3s ease-in-out infinite;
}

.data-stream {
    display: flex; flex-direction: column; align-items: center; gap: 6px; margin-top: 10px;
}

.status-line {
    margin: 0; padding: 0; color: #cfeee0; font-size: 0.95rem; font-family: 'VT323', monospace;
}

.columna-derecha { display: flex; flex-direction: column; gap: 20px; }

.logo-juego { margin-bottom: 20px; }

.subtitulo {
    font-family: 'Share Tech Mono'; color: var(--neon-red); letter-spacing: 5px; font-size: 1.2rem; margin: 0;
    animation: loadingText 2s infinite; border-right: 2px solid var(--neon-red);
    display: inline-block; padding-right: 5px;
}

.titulo-nombre {
    font-family: 'Press Start 2P'; font-size: 3.5rem; margin: 0; color: #fff;
    text-shadow: 4px 4px 0px #2c3e50; line-height: 1.2; position: relative;
    animation: textChaos 0.2s infinite; 
}

.glitch {
    display: inline-block; color: var(--neon-red);
    animation: textChaos 0.1s infinite reverse !important;
}

.panel-botones { display: flex; flex-direction: column; gap: 15px; width: 100%; }

.btn {
    background: rgba(0,0,0,0.5); border: 2px solid var(--neon-green);
    color: var(--neon-green); padding: 15px 30px; font-family: 'VT323'; font-size: 1.8rem;
    text-transform: uppercase; cursor: pointer; text-align: left;
    transition: all 0.2s; position: relative; overflow: hidden;
    animation: textFlicker 4s infinite;
}

.btn.jugar {
    animation: incitePulse 1.5s infinite ease-in-out;
    font-weight: bold; letter-spacing: 2px;
}

.btn::before {
    content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(0,255,136,0.4), transparent);
    transition: 0.5s;
}

.btn:hover { background: var(--neon-green); color: #000; box-shadow: 0 0 20px var(--neon-green); }
.btn:hover::before { left: 100%; }

.salir { border-color: var(--neon-red); color: var(--neon-red); }
.salir:hover { background: var(--neon-red); color: #fff; box-shadow: 0 0 20px var(--neon-red); }

.footer-system {
    position: absolute; bottom: 20px;
    font-family: 'Share Tech Mono'; color: var(--neon-red); letter-spacing: 2px;
    font-size: 0.9rem; animation: blinkRed 1s infinite;
}

.btn-mute {
    position: absolute; top: 15px; right: 15px; z-index: 3000;
    background: #000; color: var(--neon-green); border: 2px solid #1e0265;
    width: 40px; height: 40px; font-size: 1.2rem; cursor: pointer;
}
.btn-mute:hover { background: var(--neon-green); color: #000; }

/* =========================================
   4. PANTALLA DE JUEGO (HUD Y CANVAS)
   ========================================= */
#game {
    width: 100vw; height: 100vh; background: #050510;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
}

.header-juego {
    display: flex; justify-content: space-between; align-items: center;
    width: 600px; margin-bottom: 15px; padding: 15px;
    border: 1px solid var(--neon-green); background: #000;
    box-shadow: 0 0 10px rgba(0, 255, 65, 0.2); position: relative; z-index: 1000;
}

.info-bloque { display: flex; flex-direction: column; text-align: center; line-height: 1.2; }
.info-bloque .label { font-family: 'Share Tech Mono'; font-size: 0.8rem; color: #888; }
.info-bloque .valor { font-family: 'Press Start 2P'; font-size: 0.9rem; padding-top: 5px; }

.neon-text { color: var(--neon-green); text-shadow: 0 0 5px rgba(0, 255, 136, 0.6); }
.red-text { color: var(--neon-red); text-shadow: 0 0 5px rgba(255, 0, 85, 0.6); }

.btn-pausa {
    background: transparent; border: 1px solid var(--neon-red);
    color: var(--neon-red); padding: 5px 15px; font-family: 'Share Tech Mono';
    cursor: pointer; pointer-events: auto; position: relative; z-index: 1001; 
}

.btn-pausa:hover { background: var(--neon-red); color: white; box-shadow: 0 0 10px var(--neon-red); }

canvas {
    border: 2px solid var(--neon-green);
    box-shadow: 0 0 20px rgba(0,255,136,0.2); background-color: #000;
}

/* =========================================
   5. MENÚS MODALES (PAUSA, ALERTA, SISTEMA)
   ========================================= */
.overlay-blur {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.85); display: flex; justify-content: center; align-items: center;
    z-index: 2000; backdrop-filter: blur(5px);
}
.overlay-black {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #000; display: flex; justify-content: center; align-items: center; z-index: 2000;
}

.pausa-box {
    background: #0d1117; border: 4px solid var(--neon-red);
    padding: 40px; text-align: center; width: 400px;
    box-shadow: 0 0 50px rgba(255, 0, 85, 0.2);
}

.pausa-box h2 {
    font-family: 'Press Start 2P'; color: var(--neon-red);
    margin-bottom: 30px; font-size: 1.2rem; line-height: 1.5;
}
.glitch-text { animation: blinkRed 0.2s infinite; }

.botones-pausa { display: flex; flex-direction: column; gap: 20px; }

.btn-resume {
    background: var(--neon-green); color: #000; padding: 15px;
    font-family: 'Share Tech Mono'; font-size: 1.2rem; border: none; cursor: pointer; font-weight: bold;
}
.btn-resume:hover { filter: brightness(1.2); }

.btn-exit {
    background: transparent; border: 2px solid #fff; color: #fff;
    padding: 15px; font-family: 'Share Tech Mono'; font-size: 1.2rem; cursor: pointer;
}
.btn-exit:hover { background: #fff; color: #000; }

#puzzle-shell {
    position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
    background: rgba(10, 10, 20, 0.95); border: 2px solid var(--neon-red);
    padding: 40px; width: 500px; z-index: 2000;
    box-shadow: 0 0 50px rgba(255, 0, 85, 0.3); text-align: center;
}

.warning-text {
    font-family: 'Press Start 2P'; color: var(--neon-red);
    font-size: 1rem; margin-bottom: 15px; text-shadow: 0 0 5px var(--neon-red);
}

.console-text { font-family: 'VT323'; font-size: 1.5rem; color: #ccc; }

#array-container { display: flex; justify-content: center; gap: 10px; margin: 20px 0; }

.data-block {
    width: 60px; height: 60px;
    background: #000; border: 2px solid var(--neon-green); color: var(--neon-green);
    box-shadow: 0 0 10px rgba(0,255,136,0.5); font-family: 'Share Tech Mono';
    font-size: 1.5rem; display: flex; justify-content: center; align-items: center;
}

.highlight { background: var(--neon-red) !important; border-color: #fff !important; color: #fff; }

.botones-puzzle { display: flex; justify-content: center; gap: 20px; }

.btn-puzzle {
    background: #000; border: 2px solid #fff; color: #fff;
    padding: 10px 20px; font-family: 'Share Tech Mono'; cursor: pointer;
}
.btn-puzzle:hover { background: #fff; color: #000; }

#feedback-msg { font-family: 'Share Tech Mono'; margin-top: 15px; color: #888; }

/* =========================================
   7. NOVELA VISUAL (TERMINAL DE HISTORIA)
   ========================================= */

.terminal-window {
    width: 800px; height: 500px; 
    background: #0d1117;
    background-image: url('VN_fondo.png'); /* IMAGEN DE FONDO AÑADIDA */
    background-size: cover;
    background-position: center;
    border: 1px solid #333; box-shadow: 0 0 50px rgba(0,255,136,0.2);
    display: flex; flex-direction: column;
    position: relative;
    cursor: pointer;
}

/* Capa oscura sobre el fondo para que el texto se lea */
.terminal-window::before {
    content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.7); z-index: 1; pointer-events: none;
}

.terminal-header {
    background: rgba(22, 27, 34, 0.9); padding: 10px; display: flex; align-items: center; border-bottom: 1px solid #333;
    font-family: 'Share Tech Mono'; color: #8b949e; font-size: 0.9rem; z-index: 2;
}

.status-dot { width: 12px; height: 12px; border-radius: 50%; background: var(--neon-green); box-shadow: 0 0 10px var(--neon-green); margin-right: 8px; }

.terminal-body {
    padding: 30px; font-family: 'VT323'; color: #fff; font-size: 1.6rem;
    overflow-y: hidden; flex: 1; text-align: left;
    position: relative; z-index: 2;
}

/* ESTRUCTURA NOVELA VISUAL (VN) */
.vn-layout {
    display: flex; flex-direction: row; align-items: flex-end; gap: 20px;
}

.vn-portrait-container {
    width: 300px; height: 100%;
    display: flex; align-items: flex-end; justify-content: center;
    position: relative; padding-bottom: 0px;
}

#vn-char-img {
    width: 100%; max-height: 400px; object-fit: contain;
    filter: drop-shadow(0 0 10px #00ffff); transition: opacity 0.3s;
}

.vn-hidden { opacity: 0; display: none !important; }

.text-area {
    flex-grow: 1; display: flex; flex-direction: column; justify-content: flex-end; /* Texto abajo */
    height: 100%; padding-bottom: 20px;
}

#typewriter-text {
    background: rgba(0, 0, 0, 0.6);
    padding: 15px;
    border-left: 3px solid var(--neon-green);
    line-height: 1.5;
    min-height: 100px;
    text-shadow: 1px 1px 0 #000;
}

.vn-footer-hint {
    font-family: 'Share Tech Mono';
    font-size: 0.8rem;
    color: #888;
    margin-top: 10px;
    text-align: right;
    animation: blinkRed 1s infinite;
}

.btn-terminal {
    background: rgba(0,0,0,0.8); border: 1px solid var(--neon-green); color: var(--neon-green);
    padding: 10px; cursor: pointer; margin: 10px; font-family: 'Share Tech Mono';
    position: absolute; top: 10px; right: 10px; z-index: 10;
}
.btn-terminal:hover { background: var(--neon-green); color: #000; }

.vn-float-left {
    position: absolute; left: -250px; top: 50%; transform: translateY(-50%);
    width: 250px; filter: drop-shadow(0 0 15px #00ffff) saturate(1.5);
    animation: breathing 3s ease-in-out infinite; z-index: 2001;
}

/* =========================================
   8. VENTANAS GENÉRICAS
   ========================================= */
.oculto { display: none !important; }

/* Contenedor centrador (asegúrate de tener esto) */
#modal-victoria {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  padding: 16px;    /* evita que el panel toque los bordes en pantallas pequeñas */
  z-index: 1500;
}
#modal-victoria .ventana-victoria { pointer-events: auto; }

/* Panel rectangular centrado (tu .ventana-victoria) */
.ventana-victoria {
  pointer-events: auto;
  background: #0d1117;
  border: 2px solid var(--neon-green);
  color: var(--neon-green);
  padding: clamp(16px, 4vw, 40px);        /* padding responsivo */
  width: clamp(280px, 60vw, 600px);       /* se adapta entre 280px y 600px */
  max-width: 95%;
  box-sizing: border-box;
  text-align: center;
  box-shadow: 0 0 30px rgba(0, 255, 136, 0.1);
  border-radius: 8px;
  transform: translateZ(0);               /* mejora render en móviles */
}
/* Titular y texto responsivo */
.ventana-victoria h2 {
  font-size: clamp(1rem, 3.2vw, 1.5rem);
  margin-bottom: 12px;
}
.ventana-victoria .console-text {
  font-size: clamp(0.75rem, 2.2vw, 1rem);
  line-height: 1.3;
}

/* Ocultar/mostrar */
.oculto { display: none; }


#instructions {
    width: 700px; max-height: 85vh; display: flex; flex-direction: column;
    padding: 30px; background: rgba(13, 17, 23, 0.98);
}

.instrucciones-scroll {
    overflow-y: auto; text-align: left; padding-right: 15px;
    margin-bottom: 20px; flex: 1; font-family: 'Share Tech Mono', monospace;
}

.seccion-texto { margin-bottom: 30px; border-bottom: 1px dashed #333; padding-bottom: 15px; }
.seccion-texto h3 { font-family: 'Press Start 2P', cursive; font-size: 1rem; margin-bottom: 15px; margin-top: 0; }
.seccion-texto p, .seccion-texto ul { font-family: 'VT323', monospace; font-size: 1.4rem; line-height: 1.5; color: #ddd; margin: 8px 0; }
.seccion-texto ul { padding-left: 20px; }

#credits { width: 450px; height: auto; }
.ventana-header { font-family: 'Share Tech Mono'; color: #00ffff; font-size: 1.2rem; border-bottom: 1px solid #00ffff; margin-bottom: 20px; padding-bottom: 10px; }
.dev-name { font-family: 'Press Start 2P'; color: #fff; font-size: 1.1rem; margin: 5px 0; }
.role { font-family: 'Share Tech Mono'; color: var(--neon-green); font-size: 0.9rem; margin-bottom: 20px; }

.botones-victoria { margin-top: 20px; }
.btn-menu { background: var(--neon-green); color: #000; padding: 15px; border: none; font-family: 'Share Tech Mono'; font-size: 1.2rem; cursor: pointer; }
.volver { margin-top: 10px; background: transparent; border: 2px solid var(--neon-red); color: var(--neon-red); padding: 15px 20px; font-family: 'Share Tech Mono'; cursor: pointer; width: 100%; }
.volver:hover { background: var(--neon-red); color: #fff; }

@keyframes hologramFloat { 0% { transform: translateY(0); opacity: 0.9; } 50% { transform: translateY(-10px); opacity: 1; } 100% { transform: translateY(0); opacity: 0.9; } }
@keyframes blinkRed { 50% { opacity: 0.5; color: #fff; } }
@keyframes noiseAnim { 0% { transform: translate(0,0); } 10% { transform: translate(-1%,1%); } 20% { transform: translate(-1%,-1%); } 30% { transform: translate(1%,1%); } 40% { transform: translate(1%,-1%); } 50% { transform: translate(-1%,1%); } 60% { transform: translate(-1%,-1%); } 70% { transform: translate(1%,1%); } 80% { transform: translate(-1%,-1%); } 90% { transform: translate(1%,-1%); } 100% { transform: translate(0,0); } }

.avatar-digital { animation: hologramaFallo 4s infinite; position: relative; }
@keyframes hologramaFallo { 0% { transform: translate(0, 0); opacity: 1; filter: drop-shadow(0 0 0 transparent); } 90% { transform: translate(0, 0); opacity: 1; } 92% { transform: translate(-5px, 0); opacity: 0.8; filter: drop-shadow(5px 0 0 rgba(255,0,0,0.7)) drop-shadow(-5px 0 0 rgba(0, 38, 255, 0.7)); } 93% { transform: translate(5px, 0); opacity: 0.5; filter: drop-shadow(-5px 0 0 rgba(255,0,0,0.7)) drop-shadow(5px 0 0 rgba(0, 255, 149, 0.7)); } 94% { transform: translate(0, 5px); opacity: 1; filter: none; } 96% { opacity: 0.2; } 97% { opacity: 1; } 100% { transform: translate(0, 0); } }

@keyframes textChaos { 0% { text-shadow: 2px 0 var(--neon-red), -2px 0 #00ffff; transform: skew(0deg); } 25% { text-shadow: -2px 0 var(--neon-red), 2px 0 #00ffff; transform: skew(2deg); } 50% { color: #0066ff99; text-shadow: 4px 0 var(--neon-red), -4px 0 #0400ff; transform: skew(-2deg) translate(2px, 0); } 75% { color: #fff; text-shadow: 2px 2px var(--neon-red), -2px -2px #00ffff; transform: skew(0deg); } 100% { text-shadow: 2px 0 var(--neon-red), -2px 0 #00ffff; transform: skew(0deg); } }

@keyframes incitePulse { 0% { transform: scale(1); box-shadow: 0 0 5px var(--neon-green); border-color: rgba(0, 255, 65, 0.5); } 50% { transform: scale(1.03); box-shadow: 0 0 25px var(--neon-green), inset 0 0 10px var(--neon-green); border-color: #fff; background: rgba(0, 255, 65, 0.1); } 100% { transform: scale(1); box-shadow: 0 0 5px var(--neon-green); border-color: rgba(0, 255, 65, 0.5); } }

@keyframes loadingText { 0% { opacity: 1; text-shadow: 0 0 5px var(--neon-red); } 50% { opacity: 0.5; text-shadow: none; } 51% { opacity: 0; } 52% { opacity: 1; } 100% { opacity: 1; text-shadow: 0 0 5px var(--neon-red); } }

.blink { animation: slowBlink 1s infinite step-end; }
@keyframes slowBlink { 0% { opacity: 1; } 50% { opacity: 0.2; } 100% { opacity: 1; } }

.tv-interference {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 5000; pointer-events: none;
    background-image: repeating-linear-gradient(0deg, rgba(255, 0, 0, 0.3) 0px, rgba(0, 255, 0, 0.3) 2px, rgba(0, 0, 255, 0.3) 4px, transparent 4px, transparent 8px);
    background-size: 100% 10px; mix-blend-mode: hard-light; opacity: 0.6; animation: noiseScroll 0.2s infinite linear;
}
@keyframes noiseScroll { 0% { background-position: 0 0; filter: hue-rotate(0deg); } 100% { background-position: 0 100px; filter: hue-rotate(360deg); } }

@keyframes breathing { 0% { filter: drop-shadow(0 0 10px #00ffff) saturate(1.5); } 50% { filter: drop-shadow(0 0 25px #00ffff) saturate(1.8) brightness(1.1); } 100% { filter: drop-shadow(0 0 10px #00ffff) saturate(1.5); } }

@media (max-width: 420px) {
  .ventana-victoria { border-radius: 6px; }
  .ventana-victoria .botones-victoria { margin-top: 10px; }
}
